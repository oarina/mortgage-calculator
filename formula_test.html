


<script>
    /* This function is called from the onchange element in HTML that needs to change and will
    fetch the value from the ID linked element and paste the change to the onclick*/ 
    function updateMortgageAmount(value) {document.getElementById("mortgage-amount").value = value;};
    function updateMortggeSliderAmount(value) {document.getElementById("mortgage-slider").value = value;};

    function updateBorrowingRateAmount(value) {document.getElementById("rate-slider").value = value;};
    function updateRateSliderAmount(value){document.getElementById("borrowing-rate").value = value;};

    function updateMortgageTermAmunt(value) {document.getElementById("term-slider").value = value;};
    function updateTermSliderAmount(value){document.getElementById("mortgage-term").value = value;};

  </script>

<form>

    <label for="mortgage-amount">Mortgage amount</label>
    <span>â‚¬</span>
      <!--onchange in the imput calls a function made that changes the value of the lined element. If slider value changes - 
        a function will then change that same value in the ID linked element. -->
    <input type="number" name="mortgage-amount" id="mortgage-amount" required onchange="updateMortggeSliderAmount(this.value)">
    <input type="range" id="mortgage-slider" name="mortgage-slider" min="25000" max="1000000" value="500000" step="5000" onchange="updateMortgageAmount(this.value)">
    <!--Got inspired from (data-stepsslider="5000") seen in https://www.moneycoach.ie/mortgages/repayment-calculator/, so added step="5000" above-->
    <br>

    <label for="borrowing-rate">Borrowing rate</label>
    <span>%</span>
    <input type="number" name="borrowing-rate" id="borrowing-rate" required onchange="updateBorrowingRateAmount(this.value)">
    <input type="range" name="rate-slider" id="rate-slider" min="0" max="20" value="4" onchange="updateRateSliderAmount(this.value)">

    <br>

    <label for="mortgage-term">Mortgage term</label>
    <span><i class="fa-solid fa-calendar-days"></i></span>
    <input type="number" name="mortgage-term" id="mortgage-term"required onchange="updateMortgageTermAmunt(this.value)">
    <input type="range" name="term-slider" id="term-slider" min="5" max="35" value="15" onchange="updateTermSliderAmount(this.value)">
    
    <br>
    <br>

    <input type="submit" value="Calculate" onclick="Calculate()">
  </form>

  <hr>
<script>
     //attempt at a calculation function 
     function Calculate {
        // take term years and * by 12 and enter the amount into "term in months" field
        //when should the function get called? when clicing calculate or when a mortgage term is picked? I will do later for now.
    }
</script>
  <label for="year--to-month-conversion">Term in months</label>
  <input type="number" id="year--to-month-conversion" readonly>
  
  <p>Monthly mortgage cost</p>
  <p>Total mortgage cost</p>
  <p>Total repayment cost</p>
  <!-- <p>Annual inererest charged</p>-->
  

  <br><br><br><br><br>

<h3>Issues:</h3>

<h4>Biggest issue is that there is no way to accurately to calculate the cost of mortgage.</h4>
<p>The interst rate will never be the same throughout the entire duration of the mortgage. 
    AIB for example does from one to 10 years of fixed mortgage. 
Therefore this only is a very ROUGH estimate.</p>

  <p>Having an issue with the number dissapearing after i put it into the amount field.</p>
  <p>We're going to have multiple fields, so we need to prefent that from happening.</p>
  <p>When clicking on the input field - there is an option to go up or down - and it can go to minus. We need to prevent numbers going to minus</p>
<h3>To do:</h3>
<ol>
    <li>
        <h4>Auto-fill default samounts into their respective fields</h4>
        <p>autofilling based on the slide - right now I have that happening only onclick. What if I was to try to do it via a listener event?</p>
    </li>
    <li>Need to calculate based on 3 inputs - amount, rate and years</li>
        <ul> 
            <li>find a formula how the rate is calculated in Ireland</li>
            <li>
                <a href="https://www.ccpc.ie/consumers/money/mortgages/mortgage-interest-rates/">Consumer protection info - may help</a>
            </li>
            <li>When finding a montly borrowing rate from yearly (e.g. 3.5% divid by 12 months) how many decimal points should I use if it is an issue?
                Or will we let it just calculate to infinity?
            </li>
            <li>Look at other calculators - so far no clear answer</li>
        </ul>
           
    <li>add a calculate button, cost of repayment and total cost</li>
</ol>

<h2>BASIC AMORTISATION FORMULA</h2>
<h3> 
    TOTAL PAYMENT = mortgage-amount *(r*(1+r)^n /((1+r)^300-1))
</h3>
<a href="https://www.investopedia.com/terms/a/amortization.asp#toc-how-to-calculate-loan-amortization">*reference</a>

<h3>Monthly mortgage repayments are calculated as follows</h3>

<ol>
    <li>
       (r) First we need to find a monthly interest rate. E.g. borrowing-rate of 3.5% / 12 months = 0.29167 (To be confirmed if this is applicable to Ireland)
    </li>
    
    <li>
      (a) Then we need to adjust the decimal of the monthly rate (r) by adding 1 to it. e.g. r(0.29167)+ 1= 1.29167.
    </li>

    <li>
       (n) Now we need to find a total number of months in a term. E.g. 25 years / 12 months = 300 months means there is a total of 300 payments.
    </li>

    <li>
       (p) Now we need to raise (a) to the power of (n). 1.29167 to the power of 300 is = (p)2.215500561072621e+33

       <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Exponentiation">JS exponentiation operator</a>
    </li>

    <li>
       (t) We will multiply (r) with (p) . 0.29167 * 2.215500561072621e+33 = 6.461950486480514e+32
    </li>

    <li>
       (b) Now e will take p and minus a 1. eg. 2.215500561072621e+33which -1 = 2.215500561072621e+33
    </li>

    <li>
       (m) Now let's divide (t) 6.461950486480514e+32 by (b) 2.215500561072621e+33 = 0.29167 
    </li>

    <li>
        TOTAL PAYMENT = Now we need to mutiply (r) 0.29167 by (m) 0.29167 = 0.08507138889999999  (Chedck why r and m end up being the same value)
    </li>

    <li>
        Total Payment is 300* 0.08507138889999999 (this not did not come out right - going to try after making a commit)
    </li>


</ol>


<h3>Number limits logic: </h3>

  <p>Mortgage amount - am leting it go to 1 million, at the minute I have 500K slider preset as that is exactly half way, also it is going to start 
    at 25K minimum borrowing amount (after checking couple of sites seems that around 25K is the miminum)
    In terms of amount of time - seems that  5 is a minimum term according to  <a href="https://www.bonkers.ie/compare-mortgages/">bonkers.ie</a> and 35 is the maximum.
  </p>
  <h2>
    This is a rough estimate, and actual mortgage calculations may involve additional factors such as fees, 
    insurance, and specific loan terms. It's advisable to use a comprehensive mortgage calculator or consult 
    with a mortgage professional for precise calculations based on your circumstances and current market conditions.
</h2>
  


  <!--font awesome script-->
  <script src="https://kit.fontawesome.com/9e5468dc87.js" crossorigin="anonymous"></script>