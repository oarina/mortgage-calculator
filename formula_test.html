


<div class="form-section">
    <form>

        <label for="mortgage-amount">Mortgage amount</label>
        <span>â‚¬</span>
        <!--onchange in the imput calls a function made that changes the value of the lined element. If slider value changes - 
            a function will then change that same value in the ID linked element. -->
        <input type="number" name="mortgage-amount" id="mortgage-amount" required onchange="updateMortggeSliderAmount(this.value)">
        <input type="range" id="mortgage-slider" name="mortgage-slider" min="25000" max="1000000" value="500000" step="5000" onchange="updateMortgageAmount(this.value)">
        <!--Got inspired from (data-stepsslider="5000") seen in https://www.moneycoach.ie/mortgages/repayment-calculator/, so added step="5000" above-->
        <br>

        <label for="borrowing-rate">Borrowing rate</label>
        <span>%</span>
        <input type="number" name="borrowing-rate" id="borrowing-rate" required onchange="updateBorrowingRateAmount(this.value)">
        <input type="range" name="rate-slider" id="rate-slider" min="0" max="20" value="4" onchange="updateRateSliderAmount(this.value)">

        <br>

        <label for="mortgage-term">Mortgage term</label>
        <span><i class="fa-solid fa-calendar-days"></i></span>
        <input type="number" name="mortgage-term" id="mortgage-term"required onchange="updateMortgageTermAmunt(this.value)">
        <input type="range" name="term-slider" id="term-slider" min="5" max="35" value="15" onchange="updateTermSliderAmount(this.value)">
        
        <br>
        <br>

        <input type="submit" value="Calculate" id="calculate-button">
    </form>

    <hr>
    <script>
        // this is for calculate button
        function Calculate() {}

        // attempting to calculate terms in in months
        let yearlyTerm = document.getElementById("mortgage-term"); // creating a variable from HTML ID element
        let monthlyTerm = document.getElementById("year-to-month-conversion"); 
      
        yearlyTerm.addEventListener("input",calculateTotalAmountOfTermPayments)  // using this variable so that JS can listen to when there is an input into term box and trigger a function . "input" ref found here:   // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event 
        
        function calculateTotalAmountOfTermPayments() {
            // since yearlyTerm input is already an interger number, all I need to do is multiply by 12 and have function output the answer into monthlyTerm input
            console.log(yearlyTerm.value);
            monthlyTerm.value = 1; // it is not working .
            /*totalTermsInMonths = yearlyTerm * 12;
            monthlyTerm.value = totalTermsInMonths;*/
        }
    </script>
    <label for="year-to-month-conversion">Term in months</label>
    <input type="number" id="year-to-month-conversion" readonly>
    
    <p>Monthly mortgage cost</p>
    <p>Total mortgage cost</p>
    <p>Total repayment cost</p>
    <!-- <p>Annual inererest charged</p>-->
</div>

  <br><br><br><br><br>

<div class="issues-seciton">
    <h3><i class="fa-regular fa-hand-point-right fa-beat-fade"></i> Issues:</h3>
    <ol>
        <li><h4>Biggest issue is that there is no way to accurately to calculate the cost of mortgage.</h4></li>
        <li>The interst rate will never be the same throughout the entire duration of the mortgage. 
            AIB for example does from one to 10 years of fixed mortgage. 
        Therefore this only is a very ROUGH estimate.</li>
        <li>Having an issue with the number dissapearing after i put it into the amount field.</li>
        <li>We're going to have multiple fields, so we need to prefent that from happening.</li>
        <li>When clicking on the input field - there is an option to go up or down - and it can go to minus. We need to prevent numbers going to minus</li>
    </ol>
</div>

<div class="to-do-section">   
    <h3><i class="fa-regular fa-hand-point-right fa-beat-fade"></i> To do:</h3>
    <ol>
        <li>
            <h4>Auto-fill default samounts into their respective fields</h4>
            <p>autofilling based on the slide - right now I have that happening only onclick. What if I was to try to do it via a listener event?</p>
        </li>
        <li>Need to calculate based on 3 inputs - amount, rate and years</li>
            <ul> 
                <li>find a formula how the rate is calculated in Ireland</li>
                <li>
                    <a href="https://www.ccpc.ie/consumers/money/mortgages/mortgage-interest-rates/">Consumer protection info - may help</a>
                </li>
                <li>When finding a montly borrowing rate from yearly (e.g. 3.5% divid by 12 months) how many decimal points should I use if it is an issue? 
                    Or will we let it just calculate to infinity?
                </li>
                <li>Look at other calculators - so far no clear answer
                    <ul>
                        <li>
                            <a href="https://personalbanking.bankofireland.com/borrow/mortgages/calculators/mortgage-calculator/">BOI calc - has no submit button</a>
                        </li>
                        <li>
                            <a href="https://aib.ie/our-products/mortgages/first-time-buyers?gad=1&gclid=Cj0KCQjwwISlBhD6ARIsAESAmp7tQ-KhfrBgEGpJAevZBvlRBiPj976i6FU728UsqH3h08LlpZ2BfqoaAnGzEALw_wcB">AIB calc - good example</a>
                        </li>

                        <li>
                            <a href="https://www.moneycoach.ie/mortgages/repayment-calculator/">moneycoash calc</a>
                        </li>

                        <li>
                            <a href="https://www.mortgages.ie/go/first_time_buyers/tax_relief_calculator">mortgages.ie calc</a>
                        </li>
                    </ul>
                </li>
            </ul>
            
        <li>SIMPLE VERSION: add a calculate button, cost of repayment and total cost and try and fill all fields with that button</li>
        <li>INTUITIVE VERSION: remove the calculate button and have all the calculations happen with the change of any value so all can adjust REALTIME!</li>
    </ol>
</div>

<div class="formula-section">
    <h2>BASIC AMORTISATION FORMULA</h2>
    <i class="fa-regular fa-hand-point-right fa-beat-fade"></i> <a href="https://www.investopedia.com/terms/a/amortization.asp#toc-how-to-calculate-loan-amortization">*reference</a>

    <div class="formula-breakdown">
        <h3>TOTAL PAYMENT = mortgage-amount *(r*(1+r)^n /((1+r)^300-1))</h3>
        <h2> See chart
            <a href="https://lucid.app/lucidchart/b1ec92c6-70ae-4d79-8ecb-c9dd00f634eb/edit?viewport_loc=-161%2C-178%2C2571%2C1999%2C0_0&invitationId=inv_b2a873d0-b45a-4711-ab57-a27e581c763f">Formula breakdown</a>
        </h2>
        <p>EXAMPLE: Mortgage amount 200K, Yearly rate is 4% and a term of 10 years.(Canclucation can be found at the bottom of this HTML page in the script section)</p>
        <ol>
            <li><b>TP</b> Total monthly payouts calculation. Yearly term * 12.</li>
            <li><b>MI</b> Montly interest rate clculation. Yearly term / 100 / 12</li>
            <li><b>P</b> To the power of calculation.  (1 + MR) ^ MT   ref. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Exponentiation">JS exponentiation operator</a></li>
            <li><b>T</b> Top part of equasion calculation. MR * P</li>
            <li><b>B</b> Bottom part of the equasion calculation. P -1</li>
            <li><b>W</b> Whole: Calculating top and bottom parts of the equasion. T / B</li>
            <li><b>T</b> Total cost of the mortgage: (Mortgage amount * W) / TP</li>
            <li><b>M</b> Monthly mortgage cost. T / TP</li>
            <li><b>C</b> Cost of a mortgae. T - mortgage amount</li>
        </ol>

    </div>
</div>

<div class="number-limit-logic-section">
    <h3>Number limits logic: </h3>

    <p>Mortgage amount - am leting it go to 1 million, at the minute I have 500K slider preset as that is exactly half way, also it is going to start 
        at 25K minimum borrowing amount (after checking couple of sites seems that around 25K is the miminum)
        In terms of amount of time - seems that  5 is a minimum term according to  <a href="https://www.bonkers.ie/compare-mortgages/">bonkers.ie</a> and 35 is the maximum.
    </p>
    <h2>
        This is a rough estimate, and actual mortgage calculations may involve additional factors such as fees, 
        insurance, and specific loan terms. It's advisable to use a comprehensive mortgage calculator or consult 
        with a mortgage professional for precise calculations based on your circumstances and current market conditions.
    </h2>
</div>

<i class="fa-regular fa-hand-point-right fa-beat-fade"></i> <a href="https://www.bonkers.ie/guides/mortgage/mortgage-interest-rates-explained/">Mortgage rates explained by bonkers.ie</a>
  
<script>
    /* This function is called from the onchange element in HTML that needs to change and will
    fetch the value from the ID linked element and paste the change to the onclick*/ 
    function updateMortgageAmount(value) {document.getElementById("mortgage-amount").value = value;};
    function updateMortggeSliderAmount(value) {document.getElementById("mortgage-slider").value = value;};

    function updateBorrowingRateAmount(value) {document.getElementById("rate-slider").value = value;};
    function updateRateSliderAmount(value){document.getElementById("borrowing-rate").value = value;};

    function updateMortgageTermAmunt(value) {document.getElementById("term-slider").value = value;};
    function updateTermSliderAmount(value){document.getElementById("mortgage-term").value = value;};

    let mortgageAmount = 200000;
    let yearlyRate = 4; 
    let loanTerm = 10;
    
   /* Initial attempt / drft at calculation fucntions */

let mortgageAmount = 200000;
let yearlyRate = 4; 
let loanTerm = 10;
 
let totalPayouts = loanTerm * 12;
console.log("1. TP " + totalPayouts); // gives 120 - correct
let montlyTermInterest = yearlyRate / 100 / 12 ;
console.log("2. MI " + montlyTermInterest); // gives 0.0033333333333333335
let p = (1 + montlyTermInterest) ** totalPayouts;
console.log("3. P " + p); // 1.490832682418262
let t = p - 1;
console.log("4. T " + t); //0.49083268241826206
let b = montlyTermInterest * p;
console.log("5. B " + b); // 0.00496944227472754
let w = t / b;
console.log("6. W " + w); // 98.77017485733305
let result = mortgageAmount * w; // Let's call it T - total
console.log("7. Result " + result); // 19754034.97146661  ----- need to divide this by payouts! IMPORTANT!
let totalCost = result / totalPayouts; 
console.log("8. Total mortgage Amount " + totalCost); // 164616.95809555508 so we can round out,
console.log("8. Total mortgage Amount " + Math.round(totalCost)); // 164617
let montlyRepayment = totalCost / totalPayouts;
console.log("Monthly Repayment = " + Math.round(montlyRepayment)); // 1372 . I wanna do 1,372 
// found a way to add a coma to the number in https://sabe.io/blog/javascript-format-numbers-commas?utm_content=cmp-true 
console.log(montlyRepayment.toLocaleString("en-IE")); // 1,371.808  



/*
this is the total payment on the mortgae  and from here we can find out how much 
the mortgage was in total and what was the montly payment.
*/
  </script>

  <!--font awesome script-->
  <script src="https://kit.fontawesome.com/9e5468dc87.js" crossorigin="anonymous"></script>